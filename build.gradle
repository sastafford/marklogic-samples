buildscript {
  // Load MarkLogic properties from the Spring Boot properties file to avoid duplication
  Properties props = new Properties()
  props.load(new FileInputStream("src/main/resources/application.properties"))
  props.each { prop ->
    // Don't set the property if it's already been set, e.g. via -P on the command line
    if (prop.key.startsWith("ml") && !project.hasProperty(prop.key)) {
      project.ext.set(prop.key, prop.value)
    }
  }

  dependencies {
    classpath("org.springframework.boot:spring-boot-gradle-plugin:1.3.3.RELEASE")
  }
}

plugins {
  id "com.marklogic.ml-gradle" version "2.2.0"
  id "idea"
  id "java"
}